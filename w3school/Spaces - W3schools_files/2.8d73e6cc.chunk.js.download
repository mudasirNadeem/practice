(this["webpackJsonphosting-ui"]=this["webpackJsonphosting-ui"]||[]).push([[2],{653:function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return c})),a.d(t,"j",(function(){return p})),a.d(t,"a",(function(){return u})),a.d(t,"e",(function(){return h})),a.d(t,"f",(function(){return b})),a.d(t,"i",(function(){return j})),a.d(t,"d",(function(){return m})),a.d(t,"h",(function(){return _})),a.d(t,"g",(function(){return O}));var r,n=a(15),i=a(30),o=a(9),s=a(5);!function(e){e[e.MAX=20]="MAX",e[e.MIN=1]="MIN"}(r||(r={}));var c,l="untitled-";!function(e){e[e.MAX=3]="MAX",e[e.ROOT=1]="ROOT"}(c||(c={}));var d=function(e){return"undefined"===typeof e},p=function(e,t,a,n,i){var o=void 0;if(n?n.patternMismatch?o="Invalid character. A-Z, a-z, 0-9, _ and - allowed.":n.tooShort||e.trim().length<r.MIN?o="Please add at least ".concat(r.MIN," ").concat(r.MIN<=1?"character":"characters","."):n.tooLong?o="Please add maximum ".concat(r.MAX," characters."):n.valid||(o="Something failed. Please try again."):n||(e.trim().length<r.MIN?o="Please add at least ".concat(r.MIN," ").concat(r.MIN<=1?"character":"characters","."):e.length>r.MAX?o="Please add maximum ".concat(r.MAX," characters."):f(e)||(o="Invalid character. A-Z, a-z, 0-9, _ and - allowed.")),d(o)){var s=t.toLowerCase().split("/"),c=a.length>0&&a.filter((function(e){return e.path.toLowerCase().includes(t.toLowerCase())&&e.path.split("/").length-1===s.length}))||[];c.length>0&&c.some((function(t){return t.name.toLowerCase()===e.toLowerCase()}))&&(d(i)||(null===i||void 0===i?void 0:i.toLowerCase())!==e.toLowerCase())&&(o="Sorry, this folder name is already used.")}return o},u=/^[a-zA-Z0-9_-]*$/,f=function(e){return u.test(e)},h=function(e){var t=Object(o.a)({},e);return delete t.expanded,delete t.level,delete t.numberOfChildren,t},b=function(e){return{name:e&&e.name||"",base_name:e&&(e.base_name||e.name)||"",rel_path:e&&(e.rel_path||e.name)||"",path:e&&e.path||"",space_id:e&&(e.space_id||e.path&&e.path.split("/")[0])||"",dirs:[],size:0,extension:"",mime_type:"",is_text_based:!1,is_folder:!0,expanded:!1,level:e&&(e.level||e.path&&e.path.split("/").length-2)||0,numberOfChildren:0,parent:""}},j=function(e){return e.sort((function(e,t){return e.name.toLowerCase()>t.name.toLowerCase()?1:-1}))},m=function(e){var t=e.split("/");return t.shift(),""!==t[t.length-1]&&t.push(""),t.join("/")},_=function(){var e=Object(i.a)(Object(n.a)().mark((function e(t,a){return Object(n.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(s.fetchSpaces)({url:"/files",method:"POST",data:{action:"createFolder",path:t,_out_of_quota:"undefined"!==typeof a?a.usage_status._out_of_quota:null}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),O=function(e,t){var a=e.split("/").length,r=t.filter((function(t){return t.path.split("/").length===a+1&&t.name.includes(l)&&t.path.includes(e)})),n=1,i=!1,o="";do{o="".concat(l).concat(n),r.some((function(e){return e.name===o}))||(i=!0),n++}while(!i&&n<=100);return o}},669:function(e,t,a){"use strict";var r=a(9),n=a(77),i=a(219),o=a(15),s=a(30),c=a(210),l=a(211),d=a(213),p=a(214),u=a(1),f=a.n(u),h=a(1219),b=a(16),j=(a(722),a(42)),m=a(41),_=a(110),O=a(33),g=a(22),v=a(32),x=a(81),y=a(5),C=a(313),w=a.n(C),S=a(182),k=a(91),N=a(109),F=a(3),E=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(e){var r;return Object(c.a)(this,a),(r=t.call(this,e)).handleDropRejected=function(e){y.logging.logDebug("handleDrop > fileRejections:",e),r.setState({dragging:!1});var t=!1;e.forEach((function(e){var a;if(e.errors.length>0&&(a=e.errors[0]),a)if("file-invalid-type"===a.code){var n=e.file.name.split("."),i=n[n.length-1].toLowerCase();"free"===r.props.main_state.subscription_plan.name&&x.d[i]&&!x.e[i]?t||(t=!0,r.props.addModal({id:Object(v.f)(),dismissed:!1,type:"error",header:Object(F.jsx)(F.Fragment,{children:"Upgrade to add more file types"}),body:"The file type .".concat(i," is only supported on our paid plans. Upgrade your plan, if you want to unlock more file types for your space."),learnMoreButtonText:"Learn more",upgradeButtonText:"Upgrade"})):r.props.addNotification({id:Object(v.f)(),dismissed:!1,type:"error",header:"File upload failed.",body:"The file ".concat(x.o(e.file.name)," could not be uploaded. ").concat(e.errors[0].message),filename:e.file.name})}else r.props.addNotification({id:Object(v.f)(),dismissed:!1,type:"error",header:"File upload failed.",body:"Unknown error",filename:e.file.name});else r.props.addNotification({id:Object(v.f)(),dismissed:!1,type:"error",header:"File upload failed.",body:"Unknown error",filename:e.file.name})}))},r.showCommonUploadErrorToast=function(){var e=Object(s.a)(Object(o.a)().mark((function e(t,a){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y.logging.logDebug("showCommonUploadErrorToast -> error_description, toast_id: ",t,a),void 0!==a?(r.props.updateNotification({id:a,type:"error",header:"Upload error",body:t}),setTimeout((function(){return r.props.dismissNotification({id:a})}),4e3)):r.props.addNotification({id:Object(v.f)(),dismissed:!1,type:"error",header:"Upload error",body:t});case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),r.handleFileUpload=function(){var e=Object(s.a)(Object(o.a)().mark((function e(t){var a,n,i,s,c,l,d,p,u,f,h,j,m,_,O,g,C,w;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y.logging.logDebug("handleFileUpload -> file: ",t.file),i={"error.code":"0","error.description":"","error.context":""},r.props.setProcessingStatus(t.file,b.a.Active),t.file.processing_status=b.a.Active,t.file.path=r.props.active_path+t.file.base_name,t.file.rel_path=t.file.path.split("/").slice(1).join("/"),e.next=8,x.g(t.file,r.props.main_state);case 8:if("undefined"!==typeof(s=e.sent).data._update_main_state&&r.props.updateMainBulkState(s.data._update_main_state),"undefined"!==typeof s.data._update_space&&null!==s.data._update_space&&r.props.updateSpace(s.data._update_space),"0"===(null===(a=s.error)||void 0===a?void 0:a.code)){e.next=20;break}if(i["error.code"]=null===(c=s.error)||void 0===c?void 0:c.code,i["error.description"]=null===(l=s.error)||void 0===l?void 0:l.description,i["error.context"]=(null===(d=s.error)||void 0===d?void 0:d.context)||"generic","quota"!==i["error.context"]){e.next=18;break}return r.props.addQuotaError(s.error,t.file),e.abrupt("return",i);case 18:return r.showCommonUploadErrorToast(i["error.description"]),e.abrupt("return",i);case 20:return p=s.data.url,r.props.updateNotification({id:t.toastId,dismissed:!1,autohide:!1,closeButton:!1,type:"success",header:"Uploading file",body:"",filename:"".concat(x.o(t.file.base_name)),showProgressBar:!0,progressBarLevel:0}),e.next=24,x.r(p,t.file,t.toastId,(function(e){var a=Math.round(100*e.loaded/e.total);100===a&&(a=99),r.props.updateNotification({id:t.toastId,progressBarLevel:a})}));case 24:if(u=e.sent,y.logging.logDebug("file_upload_req_res: ",u),"undefined"===typeof u||!("0"!==u.error.code||u.status<200||u.status>=300)){e.next=35;break}return i["error.code"]="SSOFUF_".concat(u.error.code),i["error.description"]=u.error.description,i["error.context"]="generic",f={id:Object(v.f)(),dismissed:!1,type:"error",header:"File could not be uploaded",body:Object(F.jsxs)(F.Fragment,{children:["Sorry, the file ",Object(F.jsx)("strong",{children:x.o(t.file.base_name)})," could not be uploaded. Error details: [",i["error.code"],"] ",i["error.description"],". Please contact support if the problem persists."]})},r.props.dismissNotification({id:t.toastId}),r.props.addNotification(f),r.props.setProcessingStatus(t.file,b.a.Error,f.body),e.abrupt("return",i);case 35:return e.next=37,x.q(t.file,r.props.main_state);case 37:if("undefined"!==typeof(h=e.sent).data._update_main_state&&r.props.updateMainBulkState(h.data._update_main_state),"undefined"!==typeof h.data._update_space&&null!==h.data._update_space&&r.props.updateSpace(h.data._update_space),"0"===(null===(n=h.error)||void 0===n?void 0:n.code)){e.next=48;break}return i["error.code"]=null===(j=h.error)||void 0===j?void 0:j.code,i["error.description"]=null===(m=h.error)||void 0===m?void 0:m.description,i["error.context"]=null!==(_=h.error)&&void 0!==_&&_.context?null===(O=h.error)||void 0===O?void 0:O.context:"generic","quota"===i["error.context"]?("SPACE_FILE_SIZE_QUOTA_EXCEEDED"===i["error.code"]&&(i["error.context"]="quota_soft"),g=r.props.addQuotaError(h.error,t.file)):"BRIFC2"===i["error.code"]?(C={id:Object(v.f)(),dismissed:!1,type:"error",header:"File could not be uploaded",body:Object(F.jsxs)(F.Fragment,{children:["Sorry, the file ",Object(F.jsx)("strong",{children:x.o(t.file.base_name)})," could not be uploaded. This is a permanent error with code ",i["error.code"],". Please contact support."]})},g=C.body,r.props.addNotification(C)):(w={id:Object(v.f)(),dismissed:!1,type:"error",header:"File could not be uploaded",body:Object(F.jsxs)(F.Fragment,{children:["Sorry, the file ",Object(F.jsx)("strong",{children:x.o(t.file.base_name)})," could not be uploaded. Error details: [",i["error.code"],"] ",i["error.description"],". Please contact support if the problem persists."]})},g=w.body,r.props.addNotification(w)),r.props.dismissNotification({id:t.toastId}),r.props.setProcessingStatus(t.file,b.a.Error,g),e.abrupt("return",i);case 48:return r.props.updateNotification({id:t.toastId,header:"File uploaded",body:Object(F.jsxs)("div",{className:"w3s-notif-upload-success-text",children:["File ",Object(F.jsx)("strong",{children:x.o(t.file.base_name)})," uploaded successfully"]}),showProgressBar:!0,progressBarLevel:100,filename:t.file.base_name}),setTimeout((function(){return r.props.dismissNotification({id:t.toastId})}),4e3),x.k(h.data.file,r.props.space.id).path!==t.file.path&&r.props.deleteFileUploaded(t.file),e.abrupt("return",i);case 53:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.handleFilesUpload=function(){var e=Object(s.a)(Object(o.a)().mark((function e(t){var a,n,s,c,l,d;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=!1,(n=t.map((function(e){return{toastId:Object(v.f)(),file:e}}))).forEach((function(e){r.props.addNotification({id:e.toastId,dismissed:!1,autohide:!1,closeButton:!1,type:"success",header:"Uploading file",body:"",filename:"".concat(x.o(e.file.base_name)),showProgressBar:!0,progressBarLevel:0})})),s=Object(i.a)(n),e.prev=4,s.s();case 6:if((c=s.n()).done){e.next=20;break}if(l=c.value,!a){e.next=13;break}r.props.deleteFileUploaded(l.file),r.props.dismissNotification({id:l.toastId}),e.next=18;break;case 13:return e.next=15,r.handleFileUpload(l);case 15:d=e.sent,y.logging.logDebug("handleFilesUpload -> file, file_upload_response: ",l.file,d),"0"!==d["error.code"]&&"quota"===d["error.context"]&&(a=!0);case 18:e.next=6;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(4),s.e(e.t0);case 25:return e.prev=25,s.f(),e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[4,22,25,28]])})));return function(t){return e.apply(this,arguments)}}(),r.handleDropAccepted=function(){var e=Object(s.a)(Object(o.a)().mark((function e(t){var a,i,s,c,l,d,p,u,f,h,j,m,_,O;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y.logging.logDebug("handleDropAccepted -> accepted_files: ",t),r.setState({dragging:!1}),"0"===(a=S.c(r.props.main_state,r.props.space,"file")).code){e.next=6;break}return"quota"===a.context?r.props.addQuotaError(a):r.props.addModal({id:Object(v.f)(),dismissed:!1,type:"error",header:Object(F.jsx)(F.Fragment,{children:"Space temporarily closed"}),body:Object(F.jsx)(F.Fragment,{children:a.description}),dismissButtonText:"Got it"}),e.abrupt("return");case 6:if(i=r.props.main_state.subscription_plan,s=r.props.main_state.quota,c=r.props.main_state.usage,t=t.map((function(e){return new File([e],e.name.replace(/\s/g,"_"),{type:e.type,lastModified:e.lastModified})})),0!==(l=t.filter((function(e){var t=x.s(e.name,void 0,void 0,r.props.main_state.subscription_plan.name,e.type);return t?(r.props.addNotification({id:Object(v.f)(),dismissed:!1,type:"error",header:"Invalid file name",body:"".concat(t," (").concat(e.name,")"),filename:e.name}),!1):!(e.size/1024>s.storage.max_file_size)||(r.props.addQuotaError({code:"SPACE_FILE_SIZE_QUOTA_EXCEEDED"},x.l(e,r.props.space.id,!1)),!1)}))).length){e.next=13;break}return e.abrupt("return",!1);case 13:if(d=Object(k.b)(s.storage.amount),p=l.map((function(e){return e.size})).reduce((function(e,t){return e+t}),0),!(c.storage.amount+p/1024>s.storage.amount)){e.next=19;break}return i.can_be_upgraded?r.props.addModal({id:Object(v.f)(),dismissed:!1,type:"error",header:Object(F.jsx)(F.Fragment,{children:"Your storage is full"}),body:Object(F.jsxs)(F.Fragment,{children:["You have reached the ",Object(F.jsx)("strong",{children:d})," storage limit on the ",Object(F.jsx)("strong",{children:i.cname})," plan. To add more storage you can either upgrade to a bigger plan - or delete some files to free up storage."]}),learnMoreButtonText:"Learn more",upgradeButtonText:"Upgrade"}):r.props.addModal({id:Object(v.f)(),dismissed:!1,type:"error",header:Object(F.jsx)(F.Fragment,{children:"Your storage is full"}),body:Object(F.jsxs)(F.Fragment,{children:["You have reached the ",Object(F.jsx)("strong",{children:d})," storage limit on the ",Object(F.jsx)("strong",{children:i.cname})," plan. Delete some files to free up storage."]}),dismissButtonText:"Got it"}),e.abrupt("return");case 19:if(u=r.props.space.files,f=[],void 0!==u&&(f=u.map((function(e){return e.path}))),r.props.files_uploaded.length>0&&(h=f).push.apply(h,Object(n.a)(r.props.files_uploaded.map((function(e){return e.path})))),j=l.map((function(e){var t,a=w()(e.name),n=a.split(".");n[n.length-1]=n[n.length-1].toLowerCase(),a=n.join("."),f.length>0&&(t=Object(x.n)(a,f,r.props.active_path));var i=x.l(e,r.props.active_path,!0,t);return i.processing_status=b.a.OnHold,i.last_modified=new Date,i})),m=function(e){return e.size/1024>s.storage.max_file_size},_=j.filter((function(e){return m(e)})),O=j.filter((function(e){return!m(e)})),r.props.addFiles(O),_.length>0&&_.forEach((function(e){var t=r.props.addQuotaError({code:"SPACE_FILE_SIZE_QUOTA_EXCEEDED"},e);r.props.setProcessingStatus(e,b.a.Error,t)})),0!==O.length){e.next=31;break}return e.abrupt("return");case 31:r.handleFilesUpload(O);case 32:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.handleDragStart=function(){r.setState({dragging:!0})},r.handleDragStop=function(){r.setState({dragging:!1})},r.state={dragging:!1,files:[]},r}return Object(l.a)(a,[{key:"validFileExtensions",get:function(){var e;e=this.props.main_state.subscription_plan.name;return"pro"===this.props.main_state.subscription_plan.name||"premium"===this.props.main_state.subscription_plan.name?Object.keys(x.d).map((function(e){return".".concat(e)})):Object.keys(x.e).map((function(e){return".".concat(e)}))}},{key:"render",value:function(){var e=this;return Object(F.jsx)(h.a,Object(r.a)(Object(r.a)({onDropAccepted:this.handleDropAccepted,onDropRejected:this.handleDropRejected,onDragEnter:this.handleDragStart,onDragLeave:this.handleDragStop,accept:this.validFileExtensions},this.props.innerProps),{},{children:function(t){var a,n=t.getRootProps,i=t.getInputProps;return Object(F.jsx)(F.Fragment,{children:Object(F.jsxs)("div",Object(r.a)(Object(r.a)({},n({className:"dropzone"})),{},{children:[!(null!==(a=e.props.innerProps)&&void 0!==a&&a.noClick)&&Object(F.jsx)("input",Object(r.a)({},i())),!e.props.lite&&Object(F.jsx)(F.Fragment,{children:e.state.dragging&&Object(F.jsx)("div",{className:"-overlay",children:Object(F.jsx)("div",{className:"-inner-wrapper",children:Object(F.jsx)("div",{className:"-btn",children:"Drop files to upload"})})})}),e.props.children]}))})}}))}}]),a}(f.a.Component);t.a=Object(g.b)((function(e){return{main_state:e.main,files_uploaded:e.main.files_uploaded}}),(function(e){return Object(j.bindActionCreators)({addNotification:m.a,dismissNotification:m.c,updateNotification:m.e,addFiles:O.a,deleteFileUploaded:O.c,addModal:_.a,addQuotaError:N.a,updateMainBulkState:O.q,updateSpace:O.r,setProcessingStatus:O.o},e)}))(E)},670:function(e,t,a){},674:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var r,n=a(26),i=a(1),o=a(686),s=a.n(o),c=a(3);!function(e){e.Default="default",e.Destructive="destructive"}(r||(r={})),t.b=function(e){var t=Object(i.useState)(e.variant||r.Default),a=Object(n.a)(t,2),o=a[0],l=a[1];return Object(i.useEffect)((function(){e.variant&&l(e.variant)}),[e.variant]),Object(c.jsxs)("div",{className:s.a.info_text_group+(e.className?" "+e.className:""),children:[Object(c.jsx)("div",{className:s.a.info_bar+" "+s.a["variant-"+o]}),Object(c.jsx)("div",{className:s.a.info_text,children:e.children})]})}},686:function(e,t,a){e.exports={"variant-default":"InfoBarText_variant-default__1LELi","variant-destructive":"InfoBarText_variant-destructive__1RhKn",info_text_group:"InfoBarText_info_text_group__3EOed",info_bar:"InfoBarText_info_bar__1rZ80",info_text:"InfoBarText_info_text__2bpXy"}},722:function(e,t,a){},723:function(e,t,a){"use strict";var r=a(15),n=a(30),i=a(26),o=a(1),s=a(635),c=a(629),l=a(81),d=a(41),p=a(33),u=a(22),f=a(32),h=a(5),b=a(653),j=a(216),m=a(792),_=a.n(m),O=a(3);t.a=function(e){var t,a,m,g,v=Object(u.d)((function(e){return e.main})),x=v.spaces,y=Object(u.c)(),C=Object(o.useState)(!1),w=Object(i.a)(C,2),S=w[0],k=w[1],N=Object(o.useState)(!0),F=Object(i.a)(N,2),E=F[0],I=F[1],T=Object(o.useState)((null===(t=e.file)||void 0===t?void 0:t.name)||""),M=Object(i.a)(T,2),L=M[0],P=M[1],D=Object(o.useState)(void 0),A=Object(i.a)(D,2),B=A[0],R=A[1],H=Object(o.useState)(void 0),U=Object(i.a)(H,2),q=U[0],V=U[1],z=Object(o.useState)(!1),Z=Object(i.a)(z,2),X=Z[0],Y=Z[1],Q=Object(o.useState)(),W=Object(i.a)(Q,2),J=W[0],G=W[1],K=Object(o.useMemo)((function(){var t=x.filter((function(t){return t.id===e.spaceId}));return t&&0!==t.length?t[0].folders:[]}),[x,e.spaceId]),$=Object(o.useMemo)((function(){var t=x.filter((function(t){return t.id===e.spaceId}));return t&&0!==t.length?t[0].files:[]}),[x,e.spaceId]),ee=Object(o.useMemo)((function(){return Object.keys(l.a).filter((function(e){return"htm"!==e}))}),[]),te=Object(o.useMemo)((function(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:_.a.info_text,children:[Object(O.jsx)("strong",{children:"More file formats?"})," Just rename an existing text file to one of the supported extensions."]}),Object(O.jsx)("div",{className:_.a.file_type_group,children:ee.map((function(e,t){return Object(O.jsxs)("div",{className:_.a.extension_item,children:[".",e]},"extension-"+t)}))})]})}),[ee]),ae=Object(o.useState)(!0),re=Object(i.a)(ae,2),ne=re[0],ie=re[1];Object(o.useEffect)((function(){ne&&(ie(!1),G(te))}),[te,ne]);var oe=Object(o.useState)(!1),se=Object(i.a)(oe,2),ce=se[0],le=se[1];function de(){return Boolean(void 0===B)}function pe(t){t.preventDefault(),e.file&&L?de()?(k(!0),Y(!0)):I(!0):h.logging.logError("No file to rename.")}return Object(o.useEffect)((function(){!e.file||e.file.mime_type!==l.c.mp4&&e.file.mime_type!==l.c.mp3?le(!1):le(!0)}),[e.file]),Object(o.useEffect)((function(){e.file?P(e.file.base_name):P("")}),[e.file]),Object(o.useEffect)((function(){function t(){return(t=Object(n.a)(Object(r.a)().mark((function t(){var a,n,i,o,s;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Y(!1),a=e.active_path+L+(e.file&&e.file.is_folder?"/":""),n=e.file,i=l.k({Key:a,LastModified:n&&n.last_modified?n.last_modified.toString():"",Size:n?n.size:0},e.spaceId),n&&n.is_folder&&(i.path=a),!n||n.path!==i.path){t.next=9;break}return V("Please set a ".concat(n.is_folder?"foldername":"filename"," different from the current ").concat(n.is_folder?"foldername":"filename")),k(!1),t.abrupt("return");case 9:return t.next=11,Object(h.fetchSpaces)({url:"/files",method:"POST",data:{action:"rename",src_path:n.path,dest_path:i.path,is_folder:!!n&&!!n.is_folder,_out_of_quota:v.usage_status._out_of_quota}});case 11:if(o=t.sent,h.logging.logDebug("RenameFileModal -> file rename -> reqRes: ",o),"undefined"!==typeof o.data._update_main_state&&y(Object(p.q)(o.data._update_main_state)),"undefined"!==typeof o.data._update_space&&null!==o.data._update_space&&y(Object(p.r)(o.data._update_space)),"0"!==o.error.code){t.next=32;break}if(!o.data.failed_moving||!o.data.failed_moving.length){t.next=25;break}return null,s=Object(O.jsx)(O.Fragment,{children:o.data.failed_moving.map((function(e){return Object(O.jsxs)(O.Fragment,{children:[e.error.description,Object(O.jsx)("br",{})]})}))}),V(s),k(!1),I(!1),t.abrupt("return");case 25:i.last_modified=new Date,i.is_folder?y(Object(d.a)({id:Object(f.f)(),dismissed:!1,type:"success",header:"Folder renamed",body:Object(O.jsxs)(O.Fragment,{children:["Renamed ",l.o(n.base_name||"")," to ",Object(O.jsx)("strong",{children:i.base_name}),"."]})})):y(Object(d.a)({id:Object(f.f)(),dismissed:!1,type:"success",header:"File renamed",body:Object(O.jsxs)(O.Fragment,{children:["Renamed ",l.o(n.base_name)," to ",Object(O.jsx)("strong",{children:L}),"."]})})),k(!1),I(!1),e.close();case 30:t.next=47;break;case 32:t.t0=o.error.code,t.next="CURRENT_PATH_MISSING"===t.t0||"NEW_PATH_MISSING"===t.t0?35:"INVALID_FILE_EXTENSION"===t.t0?39:43;break;case 35:return V("File path is not valid."),k(!1),I(!1),t.abrupt("break",47);case 39:return V("File extension is not accepted."),k(!1),I(!1),t.abrupt("break",47);case 43:return V(o.error.description),k(!1),I(!1),t.abrupt("break",47);case 47:case"end":return t.stop()}}),t)})))).apply(this,arguments)}X&&function(){t.apply(this,arguments)}()}),[y,v.usage_status._out_of_quota,L,e,X]),Object(O.jsxs)(j.a,{show:e.show,size:"lg",className:_.a.rename_file_modal+" w3s-rename-file-modal",title:null!==(a=e.file)&&void 0!==a&&a.is_folder?"Rename folder":"Rename file",disabled:S||E&&!de(),loading:S,okText:null!==(m=e.file)&&void 0!==m&&m.is_folder?"Rename folder":"Rename file",handleOk:pe,handleClose:function(){R(void 0),G(te),V(void 0),I(!0),k(!1),e.close()},children:[Object(O.jsxs)("p",{children:["What do you want to call this ",e.file&&!e.file.is_folder?"file":"folder","?"]}),Object(O.jsxs)(s.a,{onSubmit:pe,children:[Object(O.jsx)(s.a.Control,{type:"text",value:L,onChange:function(t){var a,r,n=t.target.value,i=null!==(a=e.file)&&void 0!==a&&a.is_folder?Object(b.j)(n,e.active_path,K,void 0,e.file.name):l.s(n,$,e.active_path,v.subscription_plan.name,null===(r=e.file)||void 0===r?void 0:r.mime_type),o=l.p(n);"index.html"===n.toLowerCase()?o?G(Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("strong",{children:"Note!"})," ",e.file.path.split("/").length>2?"The filename need to be all lowercase and located in the root of the space for it to be used as a landing page for your space.":"The filename need to be all lowercase for it to be used as a landing page for your space."]})):e.file.path.split("/").length>2?G(Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("strong",{children:"Note!"})," The file needs to be located in the root of the space for it to be used as a landing page for your space."]})):ie(!0):ie(!0),P(n),R(i),V(void 0)},disabled:S,placeholder:"Enter a name for your ".concat(null!==(g=e.file)&&void 0!==g&&g.is_folder?"folder":"file"),isInvalid:E&&!de()}),E&&void 0!==B&&Object(O.jsx)(s.a.Text,{className:"rename-validation-error",children:B})]}),!!q&&Object(O.jsx)(c.a,{variant:"danger",children:q}),!q&&!!e.file&&!e.file.is_folder&&!ce&&Object(O.jsxs)("div",{className:_.a.info_text_group,children:[Object(O.jsx)("div",{className:_.a.info_bar}),Object(O.jsx)("div",{className:_.a.info_text_subgroup,children:!!J&&J})]})]})}},724:function(e,t,a){"use strict";var r=a(15),n=a(30),i=a(210),o=a(211),s=a(213),c=a(214),l=a(1),d=a.n(l),p=a(629),u=a(41),f=a(33),h=a(22),b=a(42),j=a(32),m=a(5),_=a(81),O=a(216),g=a(3),v=function(e){Object(s.a)(a,e);var t=Object(c.a)(a);function a(e){var o;return Object(i.a)(this,a),(o=t.call(this,e)).displayFileKey=function(e){return e.split("/").splice(1).join("/")},o.handleClose=function(){o.setState({loading:!1,errorMessage:void 0},(function(){o.props.close()}))},o.handleSubmit=function(){var e=Object(n.a)(Object(r.a)().mark((function e(t){var a,n;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),o.props.file&&o.props.file){e.next=4;break}return m.logging.logError("No file to delete."),e.abrupt("return");case 4:return o.setState({loading:!0}),a=o.props.file,e.next=8,Object(m.fetchSpaces)({url:"/files",method:"POST",data:{action:"delete",path:a.path,is_folder:!!a.is_folder,_out_of_quota:o.props.main_state.usage_status._out_of_quota}});case 8:if(n=e.sent,m.logging.logDebug("DeleteFileModal -> file deletion -> reqRes: ",n),"undefined"!==typeof n.data._update_main_state&&o.props.updateMainBulkState(n.data._update_main_state),"undefined"!==typeof n.data._update_space&&null!==n.data._update_space&&o.props.updateSpace(n.data._update_space),"0"!==n.error.code){e.next=17;break}o.props.addNotification({id:Object(j.f)(),dismissed:!1,type:"success",header:"".concat(a.is_folder?"Folder":"File"," deleted"),body:Object(g.jsxs)("span",{children:["Your ",a.is_folder?"folder":"file"," ",Object(g.jsx)("strong",{children:Object(_.o)(a.base_name)})," was successfully deleted."]})}),o.props.onDeleteSuccess&&o.props.onDeleteSuccess(o.props.file),e.next=24;break;case 17:e.t0=n.error.code,e.next="PATH_NOT_FOUND"===e.t0?20:22;break;case 20:return o.setState({errorMessage:"No path provided for ".concat(a.is_folder?"folder":"file","."),loading:!1}),e.abrupt("break",24);case 22:return o.setState({errorMessage:n.error.description,loading:!1}),e.abrupt("break",24);case 24:o.handleClose();case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o.state={loading:!1},o}return Object(o.a)(a,[{key:"render",value:function(){var e,t,a;return Object(g.jsxs)(O.a,{show:this.props.show,size:"lg",className:"delete-file-modal",backdrop:"static",title:null!==(e=this.props.file)&&void 0!==e&&e.is_folder?"Delete folder?":"Delete file?",loading:this.state.loading,disabled:this.state.loading,okText:null!==(t=this.props.file)&&void 0!==t&&t.is_folder?"Yes, delete folder":"Yes, delete file",okButtonVariant:"destructive",handleClose:this.handleClose,handleOk:this.handleSubmit,children:[null!==(a=this.props.file)&&void 0!==a&&a.is_folder?Object(g.jsxs)("span",{children:["Please confirm that you want to permanently delete ",Object(g.jsx)("strong",{children:this.props.file?this.props.file.name:""})," and all the files stored in this folder?",Object(g.jsx)("br",{}),Object(g.jsx)("br",{}),"This cannot be undone."]}):Object(g.jsxs)("span",{children:["Are you sure that you want to delete the file"," ",Object(g.jsx)("strong",{children:this.props.file?Object(_.o)(this.props.file.rel_path,!0):""}),"?"]}),this.state.errorMessage&&Object(g.jsx)(p.a,{variant:"danger",children:this.state.errorMessage})]})}}]),a}(d.a.Component);t.a=Object(h.b)((function(e){return{main_state:e.main}}),(function(e){return Object(b.bindActionCreators)({addNotification:u.a,updateMainBulkState:f.q,updateSpace:f.r},e)}))(v)},725:function(e,t,a){"use strict";var r=a(26),n=a(1),i=a.n(n),o=a(1222),s=(a(793),a(3));t.a=function(e){var t=e.path,a=e.folderIsSelected,n=e.spaceId,c=e.disabled,l=void 0!==c&&c,d=e.grayBackground,p=void 0!==d&&d,u=e.handleClickItem,f=i.a.useState(t),h=Object(r.a)(f,2),b=h[0],j=h[1];return i.a.useEffect((function(){var e=t;""===e[e.length-1]&&e.pop(),j(e)}),[t]),Object(s.jsx)(o.a,{className:"folder-breadcrumb"+(p?" gray-background":""),children:a?t.map((function(e,a){return l||a===b.length-1?Object(s.jsx)(o.a.Item,{active:!0,children:e},e+a):Object(s.jsx)(o.a.Item,{className:"w3s-black-color",onClick:function(){return function(e){for(var a="",r=0;r<=e;)a+=t[r]+"/",r+=1;u(a)}(a)},children:e},e+a)})):Object(s.jsx)(o.a.Item,{active:!0,children:n},n)})}},726:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var r,n=a(1),i=["title","titleId"];function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},o.apply(this,arguments)}function s(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function c(e,t){var a=e.title,c=e.titleId,l=s(e,i);return n.createElement("svg",o({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":c},l),a?n.createElement("title",{id:c},a):null,r||(r=n.createElement("path",{d:"M7.60703 3.75L9.74102 5.88398C9.97539 6.11836 10.2934 6.25 10.625 6.25H18.125C18.4703 6.25 18.75 6.52969 18.75 6.875V15.625C18.75 15.9703 18.4703 16.25 18.125 16.25H1.875C1.52969 16.25 1.25 15.9703 1.25 15.625V4.375C1.25 4.02969 1.52969 3.75 1.875 3.75H7.60703ZM1.875 2.5C0.839453 2.5 0 3.33945 0 4.375V15.625C0 16.6605 0.839453 17.5 1.875 17.5H18.125C19.1605 17.5 20 16.6605 20 15.625V6.875C20 5.83945 19.1605 5 18.125 5H10.625L8.49102 2.86602C8.25664 2.63164 7.93867 2.5 7.60703 2.5H1.875Z",fill:"#282A35"})))}var l=n.forwardRef(c);a.p},727:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var r,n=a(1),i=["title","titleId"];function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},o.apply(this,arguments)}function s(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function c(e,t){var a=e.title,c=e.titleId,l=s(e,i);return n.createElement("svg",o({width:19,height:15,viewBox:"0 0 19 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":c},l),a?n.createElement("title",{id:c},a):null,r||(r=n.createElement("path",{d:"M18.6875 2.25C18.6875 2.58584 18.5593 2.92184 18.303 3.17777L7.80298 13.6778C7.54766 13.9354 7.21133 14.0625 6.875 14.0625C6.53867 14.0625 6.20316 13.9343 5.94723 13.678L0.697227 8.42798C0.440879 8.17266 0.3125 7.83633 0.3125 7.5C0.3125 6.75023 0.925684 6.1875 1.625 6.1875C1.96084 6.1875 2.29684 6.31567 2.55277 6.57202L6.875 10.8961L16.448 1.32305C16.7023 1.06588 17.0387 0.9375 17.375 0.9375C18.0764 0.9375 18.6875 1.49941 18.6875 2.25Z",fill:"white"})))}var l=n.forwardRef(c);a.p},728:function(e,t,a){"use strict";var r=a(15),n=a(30),i=a(210),o=a(211),s=a(213),c=a(214),l=a(1),d=a.n(l),p=a(32),u=a(81),f=a(149),h=a(41),b=a(42),j=a(22),m=a(5),_=a(33),O=a(216),g=a(3),v=function(e){Object(s.a)(a,e);var t=Object(c.a)(a);function a(e){var o;return Object(i.a)(this,a),(o=t.call(this,e)).fetchImagePublicUrl=Object(n.a)(Object(r.a)().mark((function e(){var t,a;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.m(o.props.file,o.props.main_state);case 2:if(t=e.sent,m.logging.logDebug("ImagePreviewModal -> FileUtil.getSignedFilePreviewUrlResponse -> file_signed_url_req_res: ",t),"undefined"!==typeof(a=t.data)._update_main_state&&o.props.updateMainBulkState(a._update_main_state),"undefined"!==typeof a._update_space&&null!==a._update_space&&o.props.updateSpace(a._update_space),"0"===t.error.code){e.next=11;break}return o.props.addNotification({id:Object(p.f)(),dismissed:!1,type:"error",header:"File processing error",body:"".concat(t.error.description)}),o.props.close(),e.abrupt("return");case 11:o.isImage?o.setState({file_public_url:t.data.url}):o.setState({loading:!1,file_public_url:t.data.url,image_loaded:!0});case 12:case"end":return e.stop()}}),e)}))),o.state={loading:!0,image_loaded:!1,file_public_url:""},o}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.fetchImagePublicUrl()}},{key:"isAudio",get:function(){return this.props.file&&this.props.file.mime_type===u.c.mp3||!1}},{key:"isVideo",get:function(){return this.props.file&&this.props.file.mime_type===u.c.mp4||!1}},{key:"isImage",get:function(){return!this.isAudio&&!this.isVideo}},{key:"render",value:function(){var e=this;return Object(g.jsxs)(O.a,{show:!!this.props.show,className:"w3s-preview-image-modal",size:"lg",title:this.props.file?u.o(this.props.file.base_name):"",handleClose:this.props.close,displayCancel:!1,displayOk:!1,children:[this.state.loading&&Object(g.jsx)(f.a,{}),this.state.file_public_url&&Object(g.jsxs)("div",{style:{display:this.state.image_loaded?"block":"none",position:this.state.image_loaded?"relative":"absolute"},children:[this.isImage&&Object(g.jsx)("img",{src:this.props.file?this.state.file_public_url:"",alt:this.props.file?u.o(this.props.file.base_name):"",style:{maxWidth:"100%",maxHeight:"100%"},onLoad:function(){return e.setState({loading:!1,image_loaded:!0})}}),this.isAudio&&Object(g.jsxs)("audio",{controls:!0,autoPlay:!0,children:[Object(g.jsx)("source",{src:this.props.file?this.state.file_public_url:"",type:"audio/mpeg"}),"Your browser does not support the audio tag."]}),this.isVideo&&Object(g.jsxs)("video",{controls:!0,autoPlay:!0,style:{maxWidth:"100%"},children:[Object(g.jsx)("source",{src:this.props.file?this.state.file_public_url:"",type:"video/mp4"}),"Your browser does not support the video tag."]})]})]})}}]),a}(d.a.Component);t.a=Object(j.b)((function(e){return{main_state:e.main}}),(function(e){return Object(b.bindActionCreators)({addNotification:h.a,updateMainBulkState:_.q,updateSpace:_.r},e)}))(v)},730:function(e,t,a){"use strict";a(1);var r=a(3);t.a=function(e){var t=e.size,a=e.className;return Object(r.jsx)("svg",{className:a,width:t,height:t,viewBox:"0 0 16 17",xmlns:"http://www.w3.org/2000/svg",children:Object(r.jsx)("path",{d:"M13.5 9.5H13C12.8674 9.5 12.7402 9.55268 12.6464 9.64645C12.5527 9.74021 12.5 9.86739 12.5 10V14.8125C12.5 14.8622 12.4802 14.9099 12.4451 14.9451C12.4099 14.9802 12.3622 15 12.3125 15H1.6875C1.63777 15 1.59008 14.9802 1.55492 14.9451C1.51975 14.9099 1.5 14.8622 1.5 14.8125V4.1875C1.5 4.13777 1.51975 4.09008 1.55492 4.05492C1.59008 4.01975 1.63777 4 1.6875 4H6.5C6.63261 4 6.75979 3.94732 6.85355 3.85355C6.94732 3.75979 7 3.63261 7 3.5V3C7 2.86739 6.94732 2.74021 6.85355 2.64645C6.75979 2.55268 6.63261 2.5 6.5 2.5H1.5C1.10218 2.5 0.720644 2.65804 0.43934 2.93934C0.158035 3.22064 0 3.60218 0 4L0 15C0 15.3978 0.158035 15.7794 0.43934 16.0607C0.720644 16.342 1.10218 16.5 1.5 16.5H12.5C12.8978 16.5 13.2794 16.342 13.5607 16.0607C13.842 15.7794 14 15.3978 14 15V10C14 9.86739 13.9473 9.74021 13.8536 9.64645C13.7598 9.55268 13.6326 9.5 13.5 9.5ZM15.625 0.5H11.375C11.3009 0.500065 11.2284 0.522094 11.1668 0.563304C11.1052 0.604514 11.0572 0.663057 11.0289 0.731538C11.0005 0.80002 10.9931 0.875369 11.0075 0.948068C11.022 1.02077 11.0576 1.08756 11.11 1.14L12.6159 2.64656L4.10969 11.1528C4.07473 11.1877 4.04699 11.229 4.02806 11.2746C4.00913 11.3202 3.99939 11.3691 3.99939 11.4184C3.99939 11.4678 4.00913 11.5167 4.02806 11.5622C4.04699 11.6078 4.07473 11.6492 4.10969 11.6841L4.81687 12.3912C4.85171 12.4262 4.89311 12.4539 4.93869 12.4729C4.98427 12.4918 5.03314 12.5015 5.0825 12.5015C5.13186 12.5015 5.18073 12.4918 5.22631 12.4729C5.27189 12.4539 5.31329 12.4262 5.34812 12.3912L13.8544 3.88469L15.3609 5.39094C15.4135 5.44305 15.4803 5.47845 15.5529 5.49268C15.6255 5.50691 15.7007 5.49933 15.7691 5.47089C15.8374 5.44246 15.8958 5.39444 15.9369 5.33289C15.978 5.27134 15.9999 5.19901 16 5.125V0.875C16 0.775544 15.9605 0.680161 15.8902 0.609835C15.8198 0.539509 15.7245 0.5 15.625 0.5V0.5Z"})})}},731:function(e,t,a){"use strict";var r=a(15),n=a(30),i=a(26),o=a(1),s=a(629),c=a(635),l=a(16),d=a(41),p=a(33),u=a(22),f=a(806),h=a.n(f),b=a(32),j=a(653),m=a(109),_=a(216),O=a(3);t.a=function(e){var t=Object(u.d)((function(e){return e.main})),a=Object(u.c)(),f=Object(o.useState)(!1),g=Object(i.a)(f,2),v=g[0],x=g[1],y=Object(o.useState)(!0),C=Object(i.a)(y,2),w=C[0],S=C[1],k=Object(o.useState)(),N=Object(i.a)(k,2),F=N[0],E=N[1],I=Object(o.useState)(),T=Object(i.a)(I,2),M=T[0],L=T[1],P=Object(o.useState)(e.defaultName),D=Object(i.a)(P,2),A=D[0],B=D[1],R=Object(o.useState)(!1),H=Object(i.a)(R,2),U=H[0],q=H[1];function V(e){if(e.preventDefault(),!v){if(!w)return;x(!0),q(!0)}}var z=Object(o.useCallback)((function(){B(e.defaultName),L(void 0),E(void 0),S(!0),x(!1),e.close()}),[e]),Z=Object(o.useCallback)(Object(n.a)(Object(r.a)().mark((function n(){var i,o,s,c,u;return Object(r.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=e.path+A+"/",r.next=3,Object(j.h)(i,t);case 3:o=r.sent,"undefined"!==typeof(s=o.data)._update_main_state&&a(Object(p.q)(s._update_main_state)),"undefined"!==typeof s._update_space&&null!==s._update_space&&a(Object(p.r)(s._update_space)),"0"!==o.error.code?("quota"===(null===(c=o.error)||void 0===c?void 0:c.context)?(u=Object(j.e)(Object(j.f)()),a(Object(m.a)(o.error,u))):a(Object(d.a)({id:Object(b.f)(),dismissed:!1,type:"error",header:"Create folder error",body:"".concat(o.error.description)})),z()):(a(Object(d.a)({id:Object(b.f)(),dismissed:!1,type:"success",header:"Created folder",body:Object(O.jsxs)(O.Fragment,{children:["Your folder ",Object(O.jsx)("strong",{children:A})," was successfully created."]})})),a(Object(p.o)(i,l.a.NewFolder)),z());case 8:case"end":return r.stop()}}),n)}))),[a,z,A,t,e.path]);return Object(o.useEffect)((function(){U&&(q(!1),Z())}),[Z,U]),Object(O.jsxs)(_.a,{show:e.show,size:"lg",className:h.a.new_folder_modal,backdrop:"static",title:"Create a new folder",handleClose:z,handleOk:V,loading:v,disabled:v||!w||!!F,okText:"Create folder",children:[Object(O.jsx)("p",{children:"What do you want to call this folder?"}),F&&Object(O.jsx)(s.a,{variant:"danger",children:F}),Object(O.jsxs)(c.a,{onSubmit:V,children:[Object(O.jsx)(c.a.Control,{type:"text",defaultValue:e.defaultName,onChange:function(t){var a=t.target.validity.valid,r=Object(j.j)(t.target.value,e.path,e.existingFolders,t.target.validity);(a=!r)&&(t.target.validity.tooShort||0===t.target.value.length)&&(a=!1),a!==w&&(S(a),L(r)),!a||"Enter"!==t.key&&13!==t.keyCode?B(t.target.value):V(t)},isInvalid:!w,disabled:v,pattern:j.a.source,placeholder:"Enter a name for your folder",minLength:j.c.MIN,maxLength:j.c.MAX}),!w&&void 0!==M&&Object(O.jsx)(c.a.Text,{className:"rename-validation-error",children:M})]})]})}},782:function(e,t,a){"use strict";var r,n=a(77),i=a(15),o=a(30),s=a(210),c=a(211),l=a(213),d=a(214),p=a(1),u=a.n(p),f=a(629),h=a(725),b=a(16),j=a(41),m=a(33),_=a(22),O=a(42),g=a(32),v=a(5),x=a(653),y=["title","titleId"];function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},C.apply(this,arguments)}function w(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function S(e,t){var a=e.title,n=e.titleId,i=w(e,y);return p.createElement("svg",C({width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":n},i),a?p.createElement("title",{id:n},a):null,r||(r=p.createElement("path",{d:"M19.4509 2.97969L17.0204 0.549219C16.654 0.183203 16.1743 0 15.6946 0C15.2146 0 14.7349 0.183203 14.3688 0.549219L0.549316 14.3687C-0.183105 15.1012 -0.183105 16.2883 0.549316 17.0203L2.97979 19.4508C3.3458 19.8168 3.82588 20 4.30557 20C4.78525 20 5.26533 19.8168 5.63135 19.4508L19.4505 5.63125C20.1833 4.89922 20.1833 3.71211 19.4509 2.97969ZM4.30596 18.125L1.8751 15.6945L10.6212 6.94727L13.0524 9.37852L4.30596 18.125ZM14.3782 8.05234L11.947 5.62109L15.6927 1.875H15.6946L18.1251 4.30547L14.3782 8.05234ZM16.8751 11.25L15.8337 13.3332L13.7501 14.375L15.8337 15.4168L16.8751 17.5L17.9165 15.4168L20.0001 14.375L17.9165 13.3332L16.8751 11.25ZM8.7501 3.75L9.3751 2.5L10.6251 1.875L9.3751 1.25L8.7501 0L8.1251 1.25L6.8751 1.875L8.1251 2.5L8.7501 3.75ZM3.1251 6.25L4.1665 4.1668L6.2501 3.125L4.1665 2.0832L3.1251 0L2.08369 2.0832L9.76399e-05 3.125L2.08369 4.1668L3.1251 6.25Z",fill:"#282A35"})))}var k,N,F=p.forwardRef(S),E=(a.p,a(109)),I=a(682),T=a(26),M=a(633),L=a(631),P=a(338),D=(a(670),a(794),a(726)),A=a(727),B=["title","titleId"];function R(){return R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},R.apply(this,arguments)}function H(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function U(e,t){var a=e.title,r=e.titleId,n=H(e,B);return p.createElement("svg",R({fill:"none",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},n),a?p.createElement("title",{id:r},a):null,k||(k=p.createElement("g",{clipPath:"url(#a)",fill:"#282A35",fillOpacity:.6},p.createElement("path",{d:"M14 1C14.2652 1 14.5196 1.10536 14.7071 1.29289C14.8946 1.48043 15 1.73478 15 2V14C15 14.2652 14.8946 14.5196 14.7071 14.7071C14.5196 14.8946 14.2652 15 14 15H2C1.73478 15 1.48043 14.8946 1.29289 14.7071C1.10536 14.5196 1 14.2652 1 14V2C1 1.73478 1.10536 1.48043 1.29289 1.29289C1.48043 1.10536 1.73478 1 2 1H14ZM2 0C1.46957 0 0.960859 0.210714 0.585786 0.585786C0.210714 0.960859 0 1.46957 0 2L0 14C0 14.5304 0.210714 15.0391 0.585786 15.4142C0.960859 15.7893 1.46957 16 2 16H14C14.5304 16 15.0391 15.7893 15.4142 15.4142C15.7893 15.0391 16 14.5304 16 14V2C16 1.46957 15.7893 0.960859 15.4142 0.585786C15.0391 0.210714 14.5304 0 14 0L2 0Z"}),p.createElement("path",{d:"M4 8C4 7.86739 4.05268 7.74021 4.14645 7.64645C4.24021 7.55268 4.36739 7.5 4.5 7.5H11.5C11.6326 7.5 11.7598 7.55268 11.8536 7.64645C11.9473 7.74021 12 7.86739 12 8C12 8.13261 11.9473 8.25979 11.8536 8.35355C11.7598 8.44732 11.6326 8.5 11.5 8.5H4.5C4.36739 8.5 4.24021 8.44732 4.14645 8.35355C4.05268 8.25979 4 8.13261 4 8Z"}))),N||(N=p.createElement("defs",null,p.createElement("clipPath",{id:"a"},p.createElement("rect",{width:16,height:16,fill:"#fff"})))))}var q,V,z=p.forwardRef(U),Z=(a.p,["title","titleId"]);function X(){return X=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},X.apply(this,arguments)}function Y(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function Q(e,t){var a=e.title,r=e.titleId,n=Y(e,Z);return p.createElement("svg",X({fill:"none",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},n),a?p.createElement("title",{id:r},a):null,q||(q=p.createElement("g",{clipPath:"url(#a)",fill:"#282A35",fillOpacity:.6},p.createElement("path",{d:"M14 1C14.2652 1 14.5196 1.10536 14.7071 1.29289C14.8946 1.48043 15 1.73478 15 2V14C15 14.2652 14.8946 14.5196 14.7071 14.7071C14.5196 14.8946 14.2652 15 14 15H2C1.73478 15 1.48043 14.8946 1.29289 14.7071C1.10536 14.5196 1 14.2652 1 14V2C1 1.73478 1.10536 1.48043 1.29289 1.29289C1.48043 1.10536 1.73478 1 2 1H14ZM2 0C1.46957 0 0.960859 0.210714 0.585786 0.585786C0.210714 0.960859 0 1.46957 0 2L0 14C0 14.5304 0.210714 15.0391 0.585786 15.4142C0.960859 15.7893 1.46957 16 2 16H14C14.5304 16 15.0391 15.7893 15.4142 15.4142C15.7893 15.0391 16 14.5304 16 14V2C16 1.46957 15.7893 0.960859 15.4142 0.585786C15.0391 0.210714 14.5304 0 14 0L2 0Z"}),p.createElement("path",{d:"M8 4C8.13261 4 8.25979 4.05268 8.35355 4.14645C8.44732 4.24021 8.5 4.36739 8.5 4.5V7.5H11.5C11.6326 7.5 11.7598 7.55268 11.8536 7.64645C11.9473 7.74021 12 7.86739 12 8C12 8.13261 11.9473 8.25979 11.8536 8.35355C11.7598 8.44732 11.6326 8.5 11.5 8.5H8.5V11.5C8.5 11.6326 8.44732 11.7598 8.35355 11.8536C8.25979 11.9473 8.13261 12 8 12C7.86739 12 7.74021 11.9473 7.64645 11.8536C7.55268 11.7598 7.5 11.6326 7.5 11.5V8.5H4.5C4.36739 8.5 4.24021 8.44732 4.14645 8.35355C4.05268 8.25979 4 8.13261 4 8C4 7.86739 4.05268 7.74021 4.14645 7.64645C4.24021 7.55268 4.36739 7.5 4.5 7.5H7.5V4.5C7.5 4.36739 7.55268 4.24021 7.64645 4.14645C7.74021 4.05268 7.86739 4 8 4Z"}))),V||(V=p.createElement("defs",null,p.createElement("clipPath",{id:"a"},p.createElement("rect",{width:16,height:16,fill:"#fff"})))))}var W=p.forwardRef(Q),J=(a.p,a(671)),G=a(646),K=a(3);var $=function(e){var t=u.a.useRef(e.item.name),a=u.a.useRef(""),r=u.a.useState(!0),n=Object(T.a)(r,2),i=n[0],o=n[1],s=u.a.useState(""),c=Object(T.a)(s,2),l=c[0],d=c[1];function p(a){var r=e.item;if(i){r.name=t.current,r.base_name=t.current,r.base_name_lowercased=t.current.toLowerCase();var n=r.path.split("/");n[n.length-2]=r.name,r.path=n.join("/"),r.rel_path=Object(x.d)(r.path),e.handleClickSaveNewFolder(r)}}return u.a.useEffect((function(){var t=e.active_path.split("/");if(t.length<=2)a.current=e.active_path;else{var r=t.splice(0,t.length-2);a.current=r.join("/")+"/"}}),[e.active_path]),Object(K.jsx)("tr",{className:"item-tree-table-row"+(e.disabled||e.loading?" disabled":""),children:Object(K.jsx)("td",{className:(e.selected?"selected":"")+(""!==l?" display-error":""),onClick:function(){!e.disabled&&e.handleClickRow(e.item)},children:Object(K.jsxs)("div",{className:"row-div",children:[e.item.level>0&&Object(K.jsx)("div",{className:"divider-move-row",style:function(){return{width:(t=e.item.level,24*t).toString()+"px"};var t}()}),e.item.numberOfChildren>0&&Object(K.jsx)(M.a,{variant:"std",className:"ml-n4 expand-folder-btn",size:"sm",disabled:e.disabled||e.loading,onClick:function(t){return e.handleClickExpand(t,e.item)},children:e.item.expanded?Object(K.jsx)(z,{}):Object(K.jsx)(W,{})}),e.item.level>0?Object(K.jsx)(D.a,{className:"folder-icon"}):Object(K.jsx)(J.a,{spaceState:"OPEN",size:G.a.Small,spaceTechnology:e.spaceTechnology}),e.editing?Object(K.jsxs)(L.a,{children:[Object(K.jsx)(P.a,{id:"form-input-new-folder-name",placeholder:"Add a folder name",defaultValue:e.item.name,type:"text","aria-label":"Add a folder name",minLength:x.c.MIN,maxLength:x.c.MAX,required:!0,pattern:x.a.source,onKeyUp:function(r){var n=Object(x.j)(r.target.value,a.current,e.existingFolders,r.target.validity),i="undefined"===typeof n;o(i),d(n||""),!i||"Enter"!==r.key&&13!==r.keyCode?t.current=r.target.value:p()}}),Object(K.jsx)(P.a.Feedback,{type:"invalid",tooltip:!0,className:""!==l?"display-error-feedback":"",children:l}),Object(K.jsx)(M.a,{variant:"primary",className:"btn-save-new-folder",disabled:!i||e.loading,onClick:p,children:Object(K.jsx)(A.a,{})})]}):e.item.name]})})},e.item.path)};var ee,te=function(e){return Object(K.jsxs)(I.a,{hover:!0,className:"".concat(e.className?e.className+" ":"","w3s-tabletree"),size:"sm",children:[!!e.headerChild&&Object(K.jsx)("thead",{children:e.headerChild}),Object(K.jsx)("tbody",{children:e.loading||0!==e.tableItems.length?e.tableItems.map((function(t){return Object(K.jsx)($,{item:t,disabled:!!e.disabled,editing:!!e.editItemPath&&e.editItemPath===t.path,selected:!!e.selectedItemPath&&e.selectedItemPath===t.path,loading:!!e.loading,existingFolders:e.tableItems,active_path:e.selectedItemPath,spaceTechnology:e.spaceTechnology,handleClickExpand:e.onClickExpand,handleClickRow:e.onClickRow,handleClickSaveNewFolder:e.onClickSaveNewFolder?e.onClickSaveNewFolder:function(){}},t.path)})):Object(K.jsx)("tr",{children:Object(K.jsx)("td",{children:"Looks like you don't have any items!"})},"123456")}),!!e.footerChild&&Object(K.jsx)("tfoot",{children:e.footerChild})]})},ae=a(216),re=a(218);a(796);!function(e){e[e.NONE=0]="NONE",e[e.NO_FOLDERS=1]="NO_FOLDERS",e[e.SAME_AS_SELECTED=2]="SAME_AS_SELECTED"}(ee||(ee={}));var ne=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(s.a)(this,a),(r=t.call(this,e)).allFolders=void 0,r.addNewFolder=Object(o.a)(Object(i.a)().mark((function e(){var t,a,n,o,s,c,l,d;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=r.state.selectedFolder||r.state.folders[0]).level<x.b.MAX)){e.next=19;break}if(a=Object(x.g)(t.path,r.getChildFolders(t.path,t.level)),""===(n=t.path.split("/"))[n.length-1]&&n.pop(),o=n.join("/")+"/"+a+"/",s=Object(x.f)({name:a,path:o,rel_path:Object(x.d)(o),space_id:r.props.spaceId,level:t.level+1}),r.allFolders.push(s),t.numberOfChildren++,t.expanded){e.next=14;break}return e.next=12,r.clickExpanded(void 0,t);case 12:e.next=18;break;case 14:c=r.state.folders,l=function(e){return t.path===e.path},d=c.findIndex(l),c.splice(d+1,0,s);case 18:r.setState({folders:r.state.folders},(function(){r.setState({editing:!0,editFolder:s,tipText:r.setTipText(ee.NONE),displayTip:ee.NONE},(function(){r.selectRow(s)}))}));case 19:case"end":return e.stop()}}),e)}))),r.clickExpanded=function(e,t){return e&&e.stopPropagation(),new Promise((function(e,a){if(t.numberOfChildren>0){t.expanded=!t.expanded;var i=r.state.folders,o=i.findIndex((function(e){return t.path===e.path})),s=!1;t.expanded?i.splice.apply(i,[o+1,0].concat(Object(n.a)(Object(x.i)(r.getChildFolders(t.path,t.level))))):(s=r.setAllToCollapsed(t),i.splice(o+1,r.numberOfChildrenDisplayed(t,o+1))),r.setState({folders:i},(function(){s&&r.selectRow(t),e(!0)}))}else e(!1)}))},r.setAllToCollapsed=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.expanded=!1;var a=t;return r.getChildFolders(e.path,e.level).forEach((function(e){a=e.numberOfChildren>0&&e.expanded&&r.setAllToCollapsed(e,t),e.expanded=!1,t||"undefined"===typeof r.state.selectedFolder||r.state.selectedFolder.path!==e.path||(t=!0)})),t||a||!1},r.collapseAllFolders=function(){r.state.folders.filter((function(e){return 1===e.level})).forEach((function(e){e.expanded&&r.clickExpanded(void 0,e)}))},r.numberOfChildrenDisplayed=function(e,t){for(var a=0,n=t,i=r.state.folders.length;n<i&&r.state.folders[n].level>e.level;)a+=1,n+=1;return a},r.selectRow=function(e){return new Promise((function(t,a){var n;if((null===(n=r.state.selectedFolder)||void 0===n?void 0:n.path)===e.path)t(!0);else{var i=r.state.displayTip;r.state.displayTip===ee.NONE?e.path===r.props.active_path&&(i=ee.SAME_AS_SELECTED):r.state.displayTip===ee.SAME_AS_SELECTED&&(i=ee.NONE),r.setState({selectedFolder:e,tipText:r.setTipText(i),displayTip:i},(function(){t(!0)}))}}))},r.saveNewFolder=function(){var e=Object(o.a)(Object(i.a)().mark((function e(t){return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.setState({loading:!0},Object(o.a)(Object(i.a)().mark((function e(){var a,n,o,s,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){var t;return(null===(t=r.state.selectedFolder)||void 0===t?void 0:t.path)===e.path},n=r.allFolders.findIndex(a),o=t.path,e.next=5,Object(x.h)(o,r.props.main_state);case 5:"undefined"!==typeof(s=e.sent).data._update_main_state&&r.props.updateMainBulkState(s.data._update_main_state),"undefined"!==typeof s.data._update_space&&null!==s.data._update_space&&r.props.updateSpace(s.data._update_space),"0"!==s.error.code?"quota"===(null===(c=s.error)||void 0===c?void 0:c.context)?(r.props.addQuotaError(s.error,t),r.handleClose()):(r.props.addNotification({id:Object(g.f)(),dismissed:!1,type:"error",header:"Create folder error",body:"".concat(s.error.description)}),r.setState({loading:!1,editing:!1,editFolder:void 0,errorMessage:s.error.description})):(r.allFolders[n]=t,r.props.addNotification({id:Object(g.f)(),dismissed:!1,type:"success",header:"Created folder",body:Object(K.jsxs)(K.Fragment,{children:["Your folder ",Object(K.jsx)("strong",{children:t.name})," was successfully created."]})}),r.props.setProcessingStatus(o,b.a.NewFolder),r.setState({loading:!1,editing:!1,editFolder:void 0}));case 9:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.handleOpen=function(){return r.setState({loading:!0}),new Promise((function(e,t){var a;r.allFolders=((a=r.props.space_folders.map((function(e){return Object(x.f)(e)}))).forEach((function(e){var t=e.path.split("/");""===t[t.length-1]?e.level=e.path.split("/").length-2:e.level=e.path.split("/").length-1})),a),r.allFolders.forEach((function(e){e.numberOfChildren=r.getChildFolders(e.path,e.level).length}));var n=Object(x.f)();n.space_id=r.props.spaceId,n.path=r.props.spaceId+"/",n.rel_path="/",n.level=0,n.numberOfChildren=r.getChildFolders(n.path,n.level).length,n.name=r.props.spaceId,n.base_name=r.props.spaceId,r.allFolders.push(n),e(!0)})).then((function(){return Object(x.i)(r.getChildFolders("",0))})).then((function(e){r.setState({folders:e},(function(){var e="",t=r.props.active_path.split("/");return t.forEach(function(){var a=Object(o.a)(Object(i.a)().mark((function a(n,o){var s,c;return Object(i.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(o<t.length-2)){a.next=8;break}if(e+=n+"/",!(s=r.allFolders.find((function(t){return t.path===e})))){a.next=6;break}return a.next=6,r.clickExpanded(void 0,s);case 6:a.next=14;break;case 8:if(o!==t.length-2){a.next=14;break}if(e+=n+"/",!(c=r.allFolders.find((function(t){return t.path===e})))){a.next=14;break}return a.next=14,r.selectRow(c);case 14:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()),Promise.resolve()}))})).then(Object(o.a)(Object(i.a)().mark((function e(){var t,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=ee.NONE,0!==r.space.folders.length){e.next=5;break}t=ee.NO_FOLDERS,e.next=10;break;case 5:if(r.props.active_path!==r.props.spaceId+"/"){e.next=10;break}if(!(a=r.allFolders.find((function(e){return e.path===r.props.spaceId+"/"})))){e.next=10;break}return e.next=10,r.clickExpanded(void 0,a);case 10:t===ee.NONE&&(t=ee.SAME_AS_SELECTED),r.setState({loading:!1,tipText:r.setTipText(t),displayTip:t},(function(){return Promise.resolve()}));case 12:case"end":return e.stop()}}),e)}))))},r.setTipText=function(e){var t="";switch(e){case ee.NO_FOLDERS:t=Object(K.jsxs)(K.Fragment,{children:["No folders yet? Click on ",Object(K.jsx)("strong",{children:"New folder"})," to create one."]});break;case ee.SAME_AS_SELECTED:t="Selected folder is where you are coming from. Try another folder.";break;default:t=""}return t},r.getChildFolders=function(e,t){if(t===x.b.MAX)return[];if(""===e)return r.allFolders.filter((function(e){return e.path===r.props.spaceId+"/"}));var a=e.split("/");return r.allFolders.filter((function(e){if(e.level!==t+1)return!1;var r=e.path.split("/");if(""===a[a.length-1]&&a.pop(),""===r[r.length-1]&&r.pop(),r.length!==a.length+1)return!1;for(var n=0,i=!0;n<a.length&&i;){a[n]!==r[n]&&(i=!1),n++}return i}))},r.handleClose=function(){r.setState({editFolder:void 0,editing:!1,loading:!1,selectedFolder:void 0,folders:[],errorMessage:void 0},(function(){r.allFolders=[],r.props.close()}))},r.handleSubmit=function(e){if(e.preventDefault(),r.props.files&&0!==r.props.files.length){var t=r.props.files&&r.props.files[0];t&&r.setState({loading:!0},Object(o.a)(Object(i.a)().mark((function e(){var a,n,o,s,c,l,d,p;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(null===(a=r.state.selectedFolder)||void 0===a?void 0:a.path)||r.props.spaceId+"/",o={action:"move",src_path:t.path,dest_path:"",is_folder:!!t.is_folder},t.is_folder?o.dest_path=n:(s=t.path.split("/"),o.dest_path=n+s[s.length-1]),e.next=5,Object(v.fetchSpaces)({url:"/files",method:"POST",data:o});case 5:if(c=e.sent,v.logging.logDebug("MoveFileModal -> handleSubmit -> reqRes: ",c),"undefined"!==typeof c.data._update_main_state&&r.props.updateMainBulkState(c.data._update_main_state),"undefined"!==typeof c.data._update_space&&null!==c.data._update_space&&r.props.updateSpace(c.data._update_space),"0"!==c.error.code){e.next=13;break}r.props.addNotification({id:Object(g.f)(),dismissed:!1,type:"success",header:"Move",body:Object(K.jsxs)(K.Fragment,{children:["Moved ",r.props.files&&r.props.files.length?r.props.files.length:0," ",r.props.files&&(null===(l=r.props.files)||void 0===l?void 0:l.length)<=1?"file":"files"," to the folder"," ",Object(K.jsx)("strong",{children:null===(d=r.state.selectedFolder)||void 0===d?void 0:d.base_name}),"."]})}),e.next=23;break;case 13:p="",e.t0=c.error.code,e.next="PATH_NOT_FOUND"===e.t0?17:"BRAFLWTNAE"===e.t0?19:21;break;case 17:return p="No path provided for ".concat(t.is_folder?"folder":"file","."),e.abrupt("break",22);case 19:return p=Object(K.jsxs)(K.Fragment,{children:["The file ",Object(K.jsx)("strong",{children:t.base_name})," already exist in this location.",Object(K.jsx)("br",{}),Object(K.jsx)("br",{}),"You need to rename one of them before you can move it to this location."]}),e.abrupt("break",22);case 21:p=c.error.description||"Unknown error.";case 22:r.props.addNotification({id:Object(g.f)(),dismissed:!1,type:"error",header:"Move error",body:p});case 23:r.handleClose();case 24:case"end":return e.stop()}}),e)}))))}else v.logging.logError("No item to move.")},r.onClickBreadcrumbItem=function(e){var t=r.state.folders.find((function(t){return t.path===e}))||r.state.selectedFolder||Object(x.f)({path:r.props.spaceId,space_id:r.props.spaceId});r.selectRow(t).then((function(){"undefined"===typeof r.state.selectedFolder?r.collapseAllFolders():r.clickExpanded(void 0,t)}))},r.state={loading:!1,editing:!1,editFolder:void 0,folders:[],selectedFolder:void 0,displayTip:ee.NONE,tipText:""},r.allFolders=[],r}return Object(c.a)(a,[{key:"space",get:function(){var e=this;return this.props.spaces.filter((function(t){return t.id===e.props.spaceId}))[0]}},{key:"spaceTechnology",get:function(){return Object(re.a)(this.space)}},{key:"headerObject",get:function(){return Object(K.jsx)("tr",{children:Object(K.jsx)("th",{className:"breadcrumb-header",children:Object(K.jsx)(h.a,{folderIsSelected:!("undefined"===typeof this.state.selectedFolder),spaceId:this.props.spaceId,disabled:this.state.editing||this.state.loading,grayBackground:!0,path:"undefined"===typeof this.state.selectedFolder?[]:this.state.selectedFolder.path.split("/"),handleClickItem:this.onClickBreadcrumbItem})})})}},{key:"footerObject",get:function(){return Object(K.jsx)("tr",{children:Object(K.jsxs)("td",{children:[Object(K.jsx)(F,{className:"mr-2 mb-2"})," ",Object(K.jsx)("strong",{children:" Tip: "}),this.state.tipText]})})}},{key:"newFolderObject",get:function(){return Object(K.jsx)("div",{className:" new-folder-btn",children:Object(K.jsx)(v.Button,{variant:"noframe",text:"+ New folder",disabled:this.state.editing||this.state.loading||!("undefined"===typeof this.state.selectedFolder)&&this.state.selectedFolder.level===x.b.MAX,onClick:this.addNewFolder})})}},{key:"render",value:function(){var e,t;return Object(K.jsxs)(ae.a,{show:this.props.show,size:"lg",className:"move-file-modal",scrollable:!0,backdrop:"static",disabled:this.state.editing||this.state.loading||this.props.active_path===(this.state.selectedFolder?this.state.selectedFolder.path:this.props.spaceId+"/"),loading:this.state.loading,title:"Move ".concat(this.props.files&&this.props.files.length||0," item").concat(this.props.files&&this.props.files.length>1?"s":""," to folder"),okText:this.props.files&&1===this.props.files.length?"Move item":"Move items",forceFullScreenOnMedium:!0,handleClose:this.handleClose,handleShow:this.handleOpen,handleOk:this.handleSubmit,preExtraButtons:this.props.removeCreateNewFolder?void 0:this.newFolderObject,children:[!!this.state.errorMessage&&Object(K.jsx)(f.a,{variant:"danger",children:this.state.errorMessage}),!this.state.errorMessage&&Object(K.jsx)("div",{className:"rounded-table-wrapper ",children:Object(K.jsx)(te,{className:"rounded-table",headerChild:this.headerObject,loading:this.state.loading,editItemPath:null===(e=this.state.editFolder)||void 0===e?void 0:e.path,selectedItemPath:(null===(t=this.state.selectedFolder)||void 0===t?void 0:t.path)||this.props.spaceId+"/",disabled:this.state.editing,spaceTechnology:this.spaceTechnology,tableItems:this.state.folders,onClickExpand:this.clickExpanded,onClickRow:this.selectRow,onClickSaveNewFolder:this.saveNewFolder})}),this.state.displayTip!==ee.NONE&&Object(K.jsxs)("div",{className:"flex-row mt-3 pl-3",children:[Object(K.jsx)(F,{className:"mr-2 mb-2"})," ",Object(K.jsx)("strong",{children:" Tip: "}),this.state.tipText]})]})}}]),a}(u.a.Component);t.a=Object(_.b)((function(e){return{spaces:e.main.spaces,main_state:e.main}}),(function(e){return Object(O.bindActionCreators)({addNotification:j.a,updateMainBulkState:m.q,updateSpace:m.r,addQuotaError:E.a,setProcessingStatus:m.o},e)}))(ne)},783:function(e,t,a){"use strict";var r=a(15),n=a(30),i=a(26),o=a(1),s=a(635),c=a(629),l=a(22),d=a(81),p=a(16),u=a(41),f=a(33),h=a(109),b=a(110),j=a(182),m=a(32),_=a(216),O=a(804),g=a.n(O),v=a(727),x=a(3);var y=function(e){var t=Object(o.useState)(!1),a=Object(i.a)(t,2),r=a[0],n=a[1];return Object(o.useEffect)((function(){n(e.selected)}),[e.selected]),Object(x.jsx)("div",{id:e.id,className:g.a.outer_border+(r?" "+g.a.selected:""),children:Object(x.jsxs)("div",{className:g.a.file_type_item+(r?" "+g.a.selected:"")+(e.disabled?" "+g.a.disabled:"")+(e.className?" "+e.className:""),onClick:function(){return!e.disabled&&e.onClick(e.returnValue)},children:[Object(x.jsx)("div",{className:g.a.selected_group,children:Object(x.jsx)("div",{className:g.a.selected_icon,children:Object(x.jsx)(v.a,{})})}),Object(x.jsx)("div",{className:g.a.header,children:Object(x.jsx)("div",{children:e.header})}),Object(x.jsx)("div",{className:g.a.description,children:Object(x.jsx)("div",{children:e.description})})]})})},C=a(674),w=a(805),S=a.n(w),k="new-file";t.a=function(e){var t=Object(l.d)((function(e){return e.main})),a=Object(l.c)(),O=Object(o.useState)(C.a.Default),g=Object(i.a)(O,2),v=g[0],w=g[1],N=Object(o.useState)(!1),F=Object(i.a)(N,2),E=F[0],I=F[1],T=Object(o.useState)(!0),M=Object(i.a)(T,2),L=M[0],P=M[1],D=Object(o.useState)(),A=Object(i.a)(D,2),B=A[0],R=A[1],H=Object(o.useState)(void 0),U=Object(i.a)(H,2),q=U[0],V=U[1],z=Object(o.useState)(k),Z=Object(i.a)(z,2),X=Z[0],Y=Z[1],Q=Object(o.useState)("html"),W=Object(i.a)(Q,2),J=W[0],G=W[1],K=Object(o.useState)(!1),$=Object(i.a)(K,2),ee=$[0],te=$[1],ae=Object(o.useState)(),re=Object(i.a)(ae,2),ne=re[0],ie=re[1],oe=Object(o.useMemo)((function(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("strong",{children:"More file formats?"})," Just rename an existing text file to one of the supported extensions.",Object(x.jsx)("a",{className:S.a.more_info_link,href:"https://support.w3schools.com/hc/en-gb/articles/4410407391761",target:"_blank",rel:"nofollow noopener noreferrer",children:"Learn more"})]})}),[]),se=Object(o.useState)(!0),ce=Object(i.a)(se,2),le=ce[0],de=ce[1];Object(o.useEffect)((function(){le&&(de(!1),ie(oe))}),[oe,le]);var pe=Object(o.useMemo)((function(){var t=[],a=e.spaceVariantType;switch(e.spaceVariantType===p.d.NONE&&(a=e.spaceTechnology),a){case p.d.REACT:t=[{extension:"tsx",header:".tsx",description:"Script content"},{extension:"ts",header:".ts",description:"Script content"},{extension:"scss",header:".scss",description:"Style content"}];break;case p.d.VUE:t=[{extension:"vue",header:".vue",description:"Structure, script and style content"},{extension:"html",header:".html",description:"Structure content"},{extension:"css",header:".css",description:"Style content"}];break;case p.d.HANDLEBARS:t=[{extension:"hbs",header:".hbs",description:"Handlebars content"}],e.spaceTechnology===p.d.PHP?t.push({extension:"php",header:".php",description:"Script content"}):e.spaceTechnology===p.d.PYTHON?t.push({extension:"py",header:".py",description:"Script content"}):t.push({extension:"js",header:".js",description:"Script content"}),t.push({extension:"css",header:".css",description:"Style content"});break;case p.d.PYTHON:t=[{extension:"py",header:".py",description:"Script content"},{extension:"html",header:".html",description:"Structure content"},{extension:"css",header:".css",description:"Style content"}];break;case p.d.PHP:t=[{extension:"php",header:".php",description:"Script content"},{extension:"html",header:".html",description:"Structure content"},{extension:"css",header:".css",description:"Style content"}];break;default:e.spaceTechnology===p.d.PHP?t.push({extension:"php",header:".php",description:"Script content"}):e.spaceTechnology===p.d.PYTHON?t.push({extension:"py",header:".py",description:"Script content"}):t=[{extension:"html",header:".html",description:"Structure content"}],t.push({extension:"css",header:".css",description:"Style content"}),t.push({extension:"js",header:".js",description:"Script content"})}return G(t[0].extension),t}),[e.spaceTechnology,e.spaceVariantType]);function ue(){return Boolean(void 0===B)}function fe(e){G(e)}function he(e){e.preventDefault(),E||(I(!0),te(!0))}var be=Object(o.useCallback)((function(){I(!1),P(!0),V(void 0),Y(k),R(void 0),e.close()}),[e]),je=Object(o.useCallback)((function(t){var a=t+("/"===t.charAt(t.length-1)?"":"/");if(void 0===e.space.files)return"".concat(a).concat(X,".").concat(J);var r=(X+"."+J).toLowerCase();if(!e.space.files.some((function(e){return e.base_name_lowercased===r})))return"".concat(a).concat(r);for(var n=X,i=1;i<100;i++)if(n="".concat(X,"-").concat(i,".").concat(J),!e.space.files.some((function(e){return e.path===a+n})))return"".concat(a).concat(n);return"".concat(a).concat(n)}),[X,e.space,J]),me=Object(o.useCallback)(Object(n.a)(Object(r.a)().mark((function n(){var i,o,s,c,l,b,j,_,O,g,v,x;return Object(r.a)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return(s=d.h(je(e.active_path))).processing=!0,a(Object(f.a)([s])),r.next=5,d.g(s,t);case 5:if("undefined"!==typeof(c=r.sent).data._update_main_state&&a(Object(f.q)(c.data._update_main_state)),"undefined"!==typeof c.data._update_space&&null!==c.data._update_space&&a(Object(f.r)(c.data._update_space)),"0"===(null===(i=c.error)||void 0===i?void 0:i.code)){r.next=13;break}return"quota"===(null===(l=c.error)||void 0===l?void 0:l.context)?b=a(Object(h.a)(c.error,s)):(a(Object(u.a)({id:Object(m.f)(),dismissed:!1,type:"error",header:"Upload error",body:null===(j=c.error)||void 0===j?void 0:j.description})),b=null===(_=c.error)||void 0===_?void 0:_.description),a(Object(f.o)(s,p.a.Error,b)),I(!1),r.abrupt("return");case 13:return r.next=15,d.r(c.data.url,s);case 15:return r.next=17,d.q(s,t);case 17:if("undefined"!==typeof(O=r.sent).data._update_main_state&&a(Object(f.q)(O.data._update_main_state)),"undefined"!==typeof O.data._update_space&&null!==O.data._update_space&&(O.data._update_space.files=O.data._update_space.files.map((function(e){return e.path===O.data.file.Key&&(e.last_modified=new Date(O.data.file.LastModified),e.processing_status=p.a.Uploaded),e})),a(Object(f.r)(O.data._update_space))),"0"===(null===(o=O.error)||void 0===o?void 0:o.code)){r.next=25;break}return"quota"===(null===(g=O.error)||void 0===g?void 0:g.context)?a(Object(h.a)(O.error,s)):a(Object(u.a)({id:Object(m.f)(),dismissed:!1,type:"error",header:"Upload error",body:null===(x=O.error)||void 0===x?void 0:x.description})),a(Object(f.o)(s,p.a.Error,null===(v=O.error)||void 0===v?void 0:v.description)),I(!1),r.abrupt("return");case 25:s.processing=!1,be();case 27:case"end":return r.stop()}}),n)}))),[a,je,be,t,e.active_path]);return Object(o.useEffect)((function(){if(ee){te(!1);var r=j.c(t,e.space,"file");if("0"!==r.code)return"quota"===r.context?a(Object(h.a)(r)):a(Object(b.a)({id:Object(m.f)(),dismissed:!1,type:"error",header:Object(x.jsx)(x.Fragment,{children:"Space temporarily closed"}),body:Object(x.jsx)(x.Fragment,{children:r.description}),dismissButtonText:"Got it"})),void I(!1);me()}}),[me,a,E,t,e.space,ee]),Object(x.jsxs)(_.a,{show:e.show,className:S.a.new_file_modal,title:"Create a new file",size:"lg",disabled:E||L&&!ue(),loading:E,okText:"Create file",handleOk:he,handleClose:be,children:[Object(x.jsx)("div",{className:S.a.file_type_group,children:pe.map((function(e){return Object(x.jsx)(y,{selected:J===e.extension,returnValue:e.extension,header:e.header,description:e.description,onClick:fe,className:S.a.file_type_item,disabled:E||L&&!ue()},"FileType_"+e.extension)}))}),Object(x.jsx)("p",{children:"What do you want to call this file?"}),Object(x.jsxs)(s.a,{onSubmit:he,children:[Object(x.jsxs)("div",{className:S.a.form_control_group,children:[Object(x.jsx)(s.a.Control,{type:"text",value:X,onChange:function(t){var a,r=t.target.value,n=Object(d.p)(r);"html"===J&&"index"===r.toLowerCase()?n?(ie(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("strong",{children:"Note!"})," ",e.active_path.split("/").length>2?"The filename need to be all lowercase and located in the root of the space for it to be used as a landing page for your space.":"The filename need to be all lowercase for it to be used as a landing page for your space."]})),w(C.a.Destructive)):e.active_path.split("/").length>2?(ie(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("strong",{children:"Note!"})," The file needs to be located in the root of the space for it to be used as a landing page for your space."]})),w(C.a.Destructive)):(de(!0),w(C.a.Default)):(de(!0),w(C.a.Default)),a=/^\s+$/.test(X)||0===r.length?"Can not have an empty file name.":d.s(r+"."+J,e.space.files,e.active_path),V(void 0),Y(r),R(a)},disabled:E,placeholder:"Enter a name for your file",isInvalid:L&&!ue(),minLength:d.b.MIN,maxLength:d.b.MAX}),Object(x.jsx)(s.a.Text,{className:S.a.extension_text,children:".".concat(J)})]}),L&&!!B&&Object(x.jsx)(s.a.Text,{className:"rename-validation-error",children:B})]}),q&&Object(x.jsx)(c.a,{variant:"danger",children:q}),!q&&Object(x.jsx)(C.b,{variant:v,children:!!ne&&ne})]})}},792:function(e,t,a){e.exports={rename_file_modal:"RenameFileModal_rename_file_modal__3B4kh",info_text_group:"RenameFileModal_info_text_group__3C3zY",info_bar:"RenameFileModal_info_bar__8cHiQ",info_text_subgroup:"RenameFileModal_info_text_subgroup__1m7tI",info_text:"RenameFileModal_info_text__2PBjw",file_type_group:"RenameFileModal_file_type_group__OSvWM",extension_item:"RenameFileModal_extension_item__2g4V5"}},793:function(e,t,a){},794:function(e,t,a){},796:function(e,t,a){},804:function(e,t,a){e.exports={outer_border:"FileTypeItem_outer_border__2FS0w",selected:"FileTypeItem_selected__xB-wi",file_type_item:"FileTypeItem_file_type_item__3znsv",disabled:"FileTypeItem_disabled__3xxjP",selected_icon:"FileTypeItem_selected_icon__djiJk",selected_group:"FileTypeItem_selected_group__39BJ0",header:"FileTypeItem_header__JSUdD",description:"FileTypeItem_description__2nIb3"}},805:function(e,t,a){e.exports={new_file_modal:"NewFileModal_new_file_modal__1QuB4",file_type_group:"NewFileModal_file_type_group__3BaYm",file_type_item:"NewFileModal_file_type_item__1lUyx",form_control_group:"NewFileModal_form_control_group__E3QFu",extension_text:"NewFileModal_extension_text__flHDE",more_info_link:"NewFileModal_more_info_link__1d3Cg"}},806:function(e,t,a){e.exports={new_folder_modal:"NewFolderModal_new_folder_modal__3vaae"}}}]);
//# sourceMappingURL=2.8d73e6cc.chunk.js.map